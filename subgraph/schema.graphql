type Transaction @entity(immutable: true){
  id: Bytes!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}
type BtcUSDTPrice @entity(immutable: true) {
  id: Bytes!
  btcPrice: BigInt! # int256
  time: BigInt! # uint256
  transaction: Transaction!
}

type CreatedName @entity(immutable: true) {
  id: Bytes!
  username: String! # string
  userAddress: Bytes! # address
  imageURL: String! # string
  transaction: Transaction!
}

type EthUSDTPrice @entity(immutable: true) {
  id: Bytes!
  btcPrice: BigInt! # int256
  time: BigInt! # uint256
  transaction: Transaction!
}

type Messaging @entity(immutable: true) {
  id: Bytes!
  sender: String!
  reciever: String!
  messageContent: String!
  transaction: Transaction!
  protocol: Protocol!
}
type User @entity(immutable:true){
  id: Bytes!
  protocol: Protocol!
  username: String!
  userAddress: String!
}
type Protocol @entity(immutable: false ){
  id: Bytes!
  users: [User!]! @derivedFrom (field : "protocol") 
  messages: [Messaging!]! @derivedFrom (field : "protocol") 
  ethToUsdtPrice: BigInt!
  btcToUsdtPrice: BigInt!
}
